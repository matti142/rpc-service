{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///server.rpcservice.min.js","webpack:///webpack/bootstrap 27a07c63e5a25a2a471e?7cd2","webpack:///./src/service/ServiceStub.js?3e7b","webpack:///./src/util/Type.js?cda2","webpack:///./src/util/Status.js?d157","webpack:///./src/service/index.js?d231","webpack:///./src/util/index.js?6684","webpack:///./src/service/CustomEventService.js?0c83","webpack:///./src/service/LocalStorageService.js?1a2e","webpack:///./src/service/PostMessageService.js?9987","webpack:///./src/service/WKWebViewService.js?0660","webpack:///./src/role/Server.js","webpack:///./src/server.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","ServiceStub","undefined","_Type","options","_type","type","_receiveListener","receiveMessageCallback","isClient","Type","CLIENT","isServer","SERVER","getServiceName","post","dispatch","data","Status","METHOD_NOT_FOUND","METHOD_SUCCESS","METHOD_ERROR","METHOD_ASYNC","METHOD_READY","METHOD_DESTROY","METHOD_TIMEOUT","_ServiceStub","_CustomEventService","CustomEventService","_LocalStorageService","LocalStorageService","_PostMessageService","PostMessageService","_WKWebViewService","WKWebViewService","_Status","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_ServiceStub2","CustomEvent","event","params","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","window","Event","arguments","length","_this","_sourceElement","source","_targetElement","target","_eventName","addEventListener","bind","ev","dispatchEvent","_ref","destroy","removeEventListener","usedStorageKeys","_storageKey","storageKey","localStorage","removeItem","time","Date","getTime","setItem","JSON","stringify","key","newValue","parse","e","_targetWindow","_sourceWindow","_origin","origin","_verifySource","postMessage","_namespace","namespace","_callback","callbackName","hasMsgHandler","webkit","messageHandlers","strData","Server","methods","service","_connectionEstablished","_onReady","onReady","_receiveMessage","_serviceClass","_service","_token","_methods","addMethod","methodName","methodFn","removeMethod","jsonrpc","id","method","verify","token","test","_sendError","status","message","that","cb","done","_sendResult","error","methodObj","isAsync","async","result","_Server","keys","forEach","_index","_index2"],"mappings":"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","file":"server.rpcservice.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RPCService\"] = factory();\n\telse\n\t\troot[\"RPCService\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RPCService\"] = factory();\n\telse\n\t\troot[\"RPCService\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 13);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ServiceStub = undefined;\n\nvar _Type = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ServiceStub = exports.ServiceStub = function () {\n  function ServiceStub(options) {\n    _classCallCheck(this, ServiceStub);\n\n    this._type = options.type;\n    this._receiveListener = options.receiveMessageCallback;\n  }\n\n  ServiceStub.prototype.isClient = function isClient() {\n    return this._type === _Type.Type.CLIENT;\n  };\n\n  ServiceStub.prototype.isServer = function isServer() {\n    return this._type === _Type.Type.SERVER;\n  };\n\n  /**\n   *\n   */\n\n\n  ServiceStub.getServiceName = function getServiceName() {\n    throw \"not implemented yet\";\n  };\n\n  /**\n   * to be implemented in the subclass\n   */\n\n\n  ServiceStub.prototype.post = function post() {\n    throw \"post not implemented yet\";\n  };\n\n  /**\n   * forward dispatched data the registered listener\n   * @param data\n   */\n\n\n  ServiceStub.prototype.dispatch = function dispatch(data) {\n    this._receiveListener(data);\n  };\n\n  return ServiceStub;\n}();\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Type = exports.Type = {\n  SERVER: 'SERVER',\n  CLIENT: 'CLIENT'\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Status = exports.Status = {\n  METHOD_NOT_FOUND: 'METHOD_NOT_FOUND',\n  METHOD_SUCCESS: 'METHOD_SUCCESS',\n  METHOD_ERROR: 'METHOD_ERROR',\n  METHOD_ASYNC: 'METHOD_ASYNC',\n  METHOD_READY: 'METHOD_READY',\n  METHOD_DESTROY: 'METHOD_DESTROY',\n  METHOD_TIMEOUT: 'METHOD_TIMEOUT'\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ServiceStub = __webpack_require__(0);\n\nObject.defineProperty(exports, 'ServiceStub', {\n  enumerable: true,\n  get: function get() {\n    return _ServiceStub.ServiceStub;\n  }\n});\n\nvar _CustomEventService = __webpack_require__(5);\n\nObject.defineProperty(exports, 'CustomEventService', {\n  enumerable: true,\n  get: function get() {\n    return _CustomEventService.CustomEventService;\n  }\n});\n\nvar _LocalStorageService = __webpack_require__(6);\n\nObject.defineProperty(exports, 'LocalStorageService', {\n  enumerable: true,\n  get: function get() {\n    return _LocalStorageService.LocalStorageService;\n  }\n});\n\nvar _PostMessageService = __webpack_require__(7);\n\nObject.defineProperty(exports, 'PostMessageService', {\n  enumerable: true,\n  get: function get() {\n    return _PostMessageService.PostMessageService;\n  }\n});\n\nvar _WKWebViewService = __webpack_require__(8);\n\nObject.defineProperty(exports, 'WKWebViewService', {\n  enumerable: true,\n  get: function get() {\n    return _WKWebViewService.WKWebViewService;\n  }\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Status = __webpack_require__(2);\n\nObject.defineProperty(exports, 'Status', {\n  enumerable: true,\n  get: function get() {\n    return _Status.Status;\n  }\n});\n\nvar _Type = __webpack_require__(1);\n\nObject.defineProperty(exports, 'Type', {\n  enumerable: true,\n  get: function get() {\n    return _Type.Type;\n  }\n});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CustomEventService = undefined;\n\nvar _ServiceStub2 = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// polyfill for IE 10\n(function () {\n\n  if (typeof window.CustomEvent === \"function\") return false;\n\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n})();\n\nvar CustomEventService = exports.CustomEventService = function (_ServiceStub) {\n  _inherits(CustomEventService, _ServiceStub);\n\n  function CustomEventService() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, CustomEventService);\n\n    var _this = _possibleConstructorReturn(this, _ServiceStub.call(this, options));\n\n    _this._sourceElement = options.source || window;\n    _this._targetElement = options.target || _this._sourceElement;\n    _this._eventName = options.event || 'message';\n\n    _this._sourceElement.addEventListener(_this._eventName, _this.dispatch.bind(_this), false);\n    return _this;\n  }\n\n  CustomEventService.getServiceName = function getServiceName() {\n    return 'CustomEventService';\n  };\n\n  /**\n   * Send a message by using `postMessage` service.\n   * @param {object} data\n   */\n\n\n  CustomEventService.prototype.post = function post(data) {\n    data.source = this._type;\n    var ev = new CustomEvent(this._eventName, {\n      detail: data\n    });\n    this._targetElement.dispatchEvent(ev);\n  };\n\n  /**\n   * Handles received messages\n   * @param {object} detail\n   * @returns {*}\n   */\n\n\n  CustomEventService.prototype.dispatch = function dispatch(_ref) {\n    var detail = _ref.detail;\n\n    // ensure provider or customer doesn't dispatch its own message\n    if (detail && detail.source !== this._type) {\n      delete detail.source;\n      _ServiceStub.prototype.dispatch.call(this, detail);\n    }\n  };\n\n  /**\n   * remove bindings\n   */\n\n\n  CustomEventService.prototype.destroy = function destroy() {\n    this._sourceElement.removeEventListener(this._eventName, this.dispatch);\n  };\n\n  return CustomEventService;\n}(_ServiceStub2.ServiceStub);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocalStorageService = undefined;\n\nvar _ServiceStub2 = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar usedStorageKeys = {};\n\nvar LocalStorageService = exports.LocalStorageService = function (_ServiceStub) {\n  _inherits(LocalStorageService, _ServiceStub);\n\n  function LocalStorageService(options) {\n    _classCallCheck(this, LocalStorageService);\n\n    var _this = _possibleConstructorReturn(this, _ServiceStub.call(this, options));\n\n    _this._storageKey = options.storageKey || 'rpc:message';\n\n    if (usedStorageKeys[_this._storageKey]) {\n      throw 'LocalStorageService: key \\'' + _this._storageKey + '\\' is already in use by another LocalStorageService';\n    }\n    usedStorageKeys[_this._storageKey] = true;\n\n    // remove old data if exists\n    localStorage.removeItem(_this._storageKey);\n\n    window.addEventListener('storage', _this.dispatch.bind(_this), false);\n    return _this;\n  }\n\n  LocalStorageService.getServiceName = function getServiceName() {\n    return 'LocalStorageService';\n  };\n\n  /**\n   * Send a message by using `localStorage`\n   * @param {object} data\n   */\n\n\n  LocalStorageService.prototype.post = function post(data) {\n    data.time = new Date().getTime();\n    data.source = this._type;\n    localStorage.setItem(this._storageKey, JSON.stringify(data));\n  };\n\n  /**\n   * Handles received messages\n   * @param key\n   * @param newValue\n   */\n\n\n  LocalStorageService.prototype.dispatch = function dispatch(_ref) {\n    var key = _ref.key,\n        newValue = _ref.newValue;\n\n\n    if (newValue && key === this._storageKey) {\n      try {\n        var data = JSON.parse(newValue);\n        delete data.time;\n\n        // ensure provider or customer doesn't dispatch its own message\n        if (data.source !== this._type) {\n          delete data.source;\n          _ServiceStub.prototype.dispatch.call(this, data);\n        }\n      } catch (e) {}\n    }\n  };\n\n  /**\n   * remove bindings\n   */\n\n\n  LocalStorageService.prototype.destroy = function destroy() {\n    window.removeEventListener('storage', this.dispatch);\n    localStorage.removeItem(this._storageKey);\n  };\n\n  return LocalStorageService;\n}(_ServiceStub2.ServiceStub);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PostMessageService = undefined;\n\nvar _ServiceStub2 = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PostMessageService = exports.PostMessageService = function (_ServiceStub) {\n  _inherits(PostMessageService, _ServiceStub);\n\n  function PostMessageService() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, PostMessageService);\n\n    var _this = _possibleConstructorReturn(this, _ServiceStub.call(this, options));\n\n    _this._targetWindow = options.target || null;\n    _this._sourceWindow = options.source || window;\n    _this._origin = options.origin || \"*\";\n    _this._verifySource = _this._origin !== '*';\n\n    _this._sourceWindow.addEventListener('message', _this.dispatch.bind(_this), false);\n    return _this;\n  }\n\n  PostMessageService.getServiceName = function getServiceName() {\n    return 'PostMessageService';\n  };\n\n  /**\n   * Send a message by using `postMessage` service.\n   * @param {object} data\n   */\n\n\n  PostMessageService.prototype.post = function post(data) {\n\n    if (this._targetWindow === null) {\n      throw \"windows element for posting messages does not exist\";\n    }\n\n    this._targetWindow.postMessage(data, this._origin);\n  };\n\n  /**\n   * Handles received messages\n   * @param {string} origin\n   * @param {object} data\n   * @param {window} source\n   * @returns {*}\n   */\n\n\n  PostMessageService.prototype.dispatch = function dispatch(_ref) {\n    var origin = _ref.origin,\n        data = _ref.data,\n        source = _ref.source;\n\n\n    if (this._verifySource && this._origin !== origin) {\n      return null;\n    }\n\n    _ServiceStub.prototype.dispatch.call(this, data);\n  };\n\n  /**\n   * remove bindings\n   */\n\n\n  PostMessageService.prototype.destroy = function destroy() {\n    this._sourceWindow.removeEventListener('message', this.dispatch);\n  };\n\n  return PostMessageService;\n}(_ServiceStub2.ServiceStub);\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WKWebViewService = undefined;\n\nvar _ServiceStub2 = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar WKWebViewService = exports.WKWebViewService = function (_ServiceStub) {\n  _inherits(WKWebViewService, _ServiceStub);\n\n  function WKWebViewService() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, WKWebViewService);\n\n    var _this = _possibleConstructorReturn(this, _ServiceStub.call(this, options));\n\n    _this._namespace = options.namespace;\n    _this._callback = options.callbackName || 'rpcReceiveCallback';\n    var hasMsgHandler = false;\n\n    // check if special WKWebView message handler exists\n    try {\n      hasMsgHandler = typeof window.webkit.messageHandlers[_this._namespace].postMessage === 'function';\n    } catch (e) {}\n\n    if (!hasMsgHandler) {\n      throw 'WKWebViewService: cannot connect to WKWebView handler \\'window.webkit.messageHandlers.' + _this._namespace + '\\'';\n    }\n\n    // register callback function (works as response listener)\n    window[_this._callback] = _this.dispatch.bind(_this);\n    return _this;\n  }\n\n  WKWebViewService.getServiceName = function getServiceName() {\n    return 'WKWebViewService';\n  };\n\n  /**\n   * Send a message by using `postMessage` service.\n   * @param {object} data\n   */\n\n\n  WKWebViewService.prototype.post = function post(data) {\n    window.webkit.messageHandlers[this._namespace].postMessage(JSON.stringify(data));\n  };\n\n  /**\n   * Handles received messages\n   * @param {string} strData\n   * @returns {*}\n   */\n\n\n  WKWebViewService.prototype.dispatch = function dispatch(strData) {\n    try {\n      _ServiceStub.prototype.dispatch.call(this, JSON.parse(strData));\n    } catch (e) {}\n  };\n\n  /**\n   * remove bindings\n   */\n\n\n  WKWebViewService.prototype.destroy = function destroy() {\n    delete window[this._namespace];\n  };\n\n  return WKWebViewService;\n}(_ServiceStub2.ServiceStub);\n\n/***/ }),\n/* 9 */,\n/* 10 */,\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Server = undefined;\n\nvar _Status = __webpack_require__(2);\n\nvar _Type = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Server = exports.Server = function () {\n\n  /**\n   *\n   * @param options -\n   * @param methods - function map\n   */\n  function Server(options) {\n    var methods = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Server);\n\n    if (!options.service) {\n      throw \"missing option 'service' for service class\";\n    }\n\n    this._connectionEstablished = false;\n    this._onReady = typeof options.onReady === 'function' ? options.onReady : null;\n\n    options.type = _Type.Type.SERVER;\n    options.receiveMessageCallback = this._receiveMessage.bind(this);\n\n    this._serviceClass = options.service;\n    this._service = new this._serviceClass(options);\n    this._token = null;\n    this._methods = methods;\n  }\n\n  /**\n   * register given callback function with `methodName`\n   * @param methodName\n   * @param methodFn\n   * @returns {Consumer}\n   */\n\n\n  Server.prototype.addMethod = function addMethod(methodName, methodFn) {\n    this._methods[methodName] = methodFn;\n    return this;\n  };\n\n  /**\n   * Remove callback function with given `methodName`\n   * @param methodName\n   */\n\n\n  Server.prototype.removeMethod = function removeMethod(methodName) {\n    if (this._methods[methodName]) {\n      delete this._methods[methodName];\n    }\n    return this;\n  };\n\n  /**\n   * Handles a message sent by a provider and invoke the method.\n   * @param jsonrpc\n   * @param id\n   * @param method\n   * @param params\n   * @param verify\n   * @param token\n   * @param test\n   * @returns {*}\n   * @private\n   */\n\n\n  Server.prototype._receiveMessage = function _receiveMessage(_ref) {\n    var jsonrpc = _ref.jsonrpc,\n        id = _ref.id,\n        method = _ref.method,\n        params = _ref.params,\n        verify = _ref.verify,\n        token = _ref.token,\n        test = _ref.test;\n\n\n    if (!this._connectionEstablished && verify && id) {\n      this._connectionEstablished = true;\n      this._token = id;\n      this._service.post({\n        verify: verify,\n        id: id\n      });\n      if (this._onReady) {\n        this._onReady();\n      }\n    }\n\n    // check JSON RPC format for answer\n    if (!this._connectionEstablished || jsonrpc !== \"2.0\" || !id || !method || token !== this._token) {\n      return;\n    }\n\n    // message with given id does not exist\n    if (!this._methods[method]) {\n      return this._sendError(id, {\n        status: _Status.Status.METHOD_NOT_FOUND,\n        message: 'method with name ' + method + ' could not be found'\n      });\n    }\n\n    var that = this;\n    var cb = {\n      done: function done(data) {\n        that._sendResult(id, {\n          status: _Status.Status.METHOD_SUCCESS,\n          data: data\n        });\n      },\n      error: function error(data) {\n        that._sendResult(id, {\n          status: _Status.Status.METHOD_ERROR,\n          data: data\n        });\n      }\n    };\n    var methodObj = {\n      method: this._methods[method],\n      isAsync: false,\n      async: function async() {\n        this.isAsync = true;\n        that._sendResult(id, {\n          status: _Status.Status.METHOD_ASYNC\n        });\n        return cb;\n      }\n    };\n\n    // invoke method\n    var result = methodObj.method(params, cb.done, cb.error);\n\n    // stop here if method works asynchronously\n    if (methodObj.isAsync) {\n      return;\n    }\n\n    // undefined result should work as success by documentation\n    if (result === undefined) {\n      result = true;\n    }\n\n    if (result === false || result === null) {\n      return cb.error();\n    }\n    return cb.done(result);\n  };\n\n  /**\n   * send `success` response to the provider\n   * @param id\n   * @param data\n   */\n\n\n  Server.prototype._sendResult = function _sendResult(id, data) {\n    this._service.post({\n      jsonrpc: \"2.0\",\n      id: id,\n      result: data\n    });\n  };\n\n  /**\n   * send `error` response to the provider\n   * @param id\n   * @param data\n   */\n\n\n  Server.prototype._sendError = function _sendError(id, data) {\n    this._service.post({\n      jsonrpc: \"2.0\",\n      id: id,\n      error: data\n    });\n  };\n\n  Server.prototype.destroy = function destroy() {\n    this._service.destroy();\n    this._methods = {};\n  };\n\n  return Server;\n}();\n\n/***/ }),\n/* 12 */,\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Server = __webpack_require__(11);\n\nObject.keys(_Server).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _Server[key];\n    }\n  });\n});\n\nvar _index = __webpack_require__(3);\n\nObject.keys(_index).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _index[key];\n    }\n  });\n});\n\nvar _index2 = __webpack_require__(4);\n\nObject.keys(_index2).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _index2[key];\n    }\n  });\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// server.rpcservice.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 27a07c63e5a25a2a471e","import {Type} from '../util/Type'\n\nexport class ServiceStub {\n\n  constructor(options) {\n    this._type = options.type;\n    this._receiveListener = options.receiveMessageCallback;\n  }\n\n  isClient() {\n    return this._type === Type.CLIENT;\n  }\n\n  isServer() {\n    return this._type === Type.SERVER;\n  }\n\n  /**\n   *\n   */\n  static getServiceName() {\n    throw \"not implemented yet\";\n  }\n\n  /**\n   * to be implemented in the subclass\n   */\n  post() {\n    throw \"post not implemented yet\";\n  }\n\n  /**\n   * forward dispatched data the registered listener\n   * @param data\n   */\n  dispatch(data) {\n    this._receiveListener(data);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/ServiceStub.js","\nexport const Type = {\n  SERVER: 'SERVER',\n  CLIENT: 'CLIENT'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/Type.js","\nexport const Status = {\n  METHOD_NOT_FOUND: 'METHOD_NOT_FOUND',\n  METHOD_SUCCESS: 'METHOD_SUCCESS',\n  METHOD_ERROR: 'METHOD_ERROR',\n  METHOD_ASYNC: 'METHOD_ASYNC',\n  METHOD_READY: 'METHOD_READY',\n  METHOD_DESTROY: 'METHOD_DESTROY',\n  METHOD_TIMEOUT: 'METHOD_TIMEOUT'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/Status.js","\nexport {ServiceStub} from './ServiceStub';\nexport {CustomEventService} from './CustomEventService';\nexport {LocalStorageService} from './LocalStorageService';\nexport {PostMessageService} from './PostMessageService';\nexport {WKWebViewService} from './WKWebViewService';\n\n\n// WEBPACK FOOTER //\n// ./src/service/index.js","\nexport {Status} from './Status'\nexport {Type} from './Type'\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/index.js","import {ServiceStub} from './ServiceStub';\n\n// polyfill for IE 10\n(function () {\n\n  if ( typeof window.CustomEvent === \"function\" ) return false;\n\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n})();\n\n\nexport class CustomEventService extends ServiceStub {\n\n  constructor(options = {}) {\n    super(options);\n\n    this._sourceElement = options.source || window;\n    this._targetElement = options.target || this._sourceElement;\n    this._eventName     = options.event || 'message';\n\n    this._sourceElement.addEventListener(this._eventName, this.dispatch.bind(this), false);\n  }\n\n  static getServiceName() {\n    return 'CustomEventService'\n  }\n\n  /**\n   * Send a message by using `postMessage` service.\n   * @param {object} data\n   */\n  post(data) {\n    data.source = this._type;\n    const ev = new CustomEvent(this._eventName, {\n      detail: data\n    });\n    this._targetElement.dispatchEvent(ev);\n  }\n\n  /**\n   * Handles received messages\n   * @param {object} detail\n   * @returns {*}\n   */\n  dispatch({detail}) {\n    // ensure provider or customer doesn't dispatch its own message\n    if (detail && detail.source !== this._type) {\n      delete detail.source;\n      super.dispatch(detail);\n    }\n  }\n\n  /**\n   * remove bindings\n   */\n  destroy() {\n    this._sourceElement.removeEventListener(this._eventName, this.dispatch);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/CustomEventService.js","import {ServiceStub} from './ServiceStub';\n\nlet usedStorageKeys = {};\n\nexport class LocalStorageService extends ServiceStub {\n\n  constructor(options) {\n    super(options);\n\n    this._storageKey = options.storageKey || 'rpc:message';\n\n    if (usedStorageKeys[this._storageKey]) {\n      throw `LocalStorageService: key '${this._storageKey}' is already in use by another LocalStorageService`;\n    }\n    usedStorageKeys[this._storageKey] = true;\n\n    // remove old data if exists\n    localStorage.removeItem(this._storageKey);\n\n    window.addEventListener('storage', this.dispatch.bind(this), false);\n  }\n\n  static getServiceName() {\n    return 'LocalStorageService'\n  }\n\n  /**\n   * Send a message by using `localStorage`\n   * @param {object} data\n   */\n  post(data) {\n    data.time = new Date().getTime();\n    data.source = this._type;\n    localStorage.setItem(this._storageKey, JSON.stringify(data));\n  }\n\n  /**\n   * Handles received messages\n   * @param key\n   * @param newValue\n   */\n  dispatch({key, newValue}) {\n\n    if (newValue && key === this._storageKey) {\n      try {\n        const data = JSON.parse(newValue);\n        delete data.time;\n\n        // ensure provider or customer doesn't dispatch its own message\n        if (data.source !== this._type) {\n          delete data.source;\n          super.dispatch(data);\n        }\n      } catch(e) {}\n    }\n  }\n\n  /**\n   * remove bindings\n   */\n  destroy() {\n    window.removeEventListener('storage', this.dispatch);\n    localStorage.removeItem(this._storageKey);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/LocalStorageService.js","import {ServiceStub} from './ServiceStub';\n\nexport class PostMessageService extends ServiceStub {\n\n  constructor(options = {}) {\n    super(options);\n\n    this._targetWindow = options.target || null;\n    this._sourceWindow = options.source || window;\n    this._origin       = options.origin || \"*\";\n    this._verifySource = this._origin !== '*';\n\n    this._sourceWindow.addEventListener('message', this.dispatch.bind(this), false);\n  }\n\n  static getServiceName() {\n    return 'PostMessageService'\n  }\n\n  /**\n   * Send a message by using `postMessage` service.\n   * @param {object} data\n   */\n  post(data) {\n\n    if (this._targetWindow === null) {\n      throw \"windows element for posting messages does not exist\";\n    }\n\n    this._targetWindow.postMessage(data, this._origin);\n  }\n\n  /**\n   * Handles received messages\n   * @param {string} origin\n   * @param {object} data\n   * @param {window} source\n   * @returns {*}\n   */\n  dispatch({origin, data, source}) {\n\n    if (this._verifySource && this._origin !== origin) {\n      return null;\n    }\n\n    super.dispatch(data);\n  }\n\n  /**\n   * remove bindings\n   */\n  destroy() {\n    this._sourceWindow.removeEventListener('message', this.dispatch);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/PostMessageService.js","import {ServiceStub} from './ServiceStub';\n\nexport class WKWebViewService extends ServiceStub {\n\n  constructor(options = {}) {\n    super(options);\n\n    this._namespace = options.namespace;\n    this._callback = options.callbackName || 'rpcReceiveCallback';\n    let hasMsgHandler = false;\n\n    // check if special WKWebView message handler exists\n    try {\n      hasMsgHandler = (typeof window.webkit.messageHandlers[this._namespace].postMessage === 'function');\n    } catch(e) {}\n\n    if (!hasMsgHandler) {\n      throw `WKWebViewService: cannot connect to WKWebView handler 'window.webkit.messageHandlers.${this._namespace}'`;\n    }\n\n    // register callback function (works as response listener)\n    window[this._callback] = this.dispatch.bind(this);\n  }\n\n  static getServiceName() {\n    return 'WKWebViewService'\n  }\n\n  /**\n   * Send a message by using `postMessage` service.\n   * @param {object} data\n   */\n  post(data) {\n    window.webkit.messageHandlers[this._namespace].postMessage(JSON.stringify(data));\n  }\n\n  /**\n   * Handles received messages\n   * @param {string} strData\n   * @returns {*}\n   */\n  dispatch(strData) {\n    try {\n      super.dispatch(JSON.parse(strData));\n    } catch(e) {}\n  }\n\n  /**\n   * remove bindings\n   */\n  destroy() {\n    delete window[this._namespace];\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/WKWebViewService.js","import {Status} from '../util/Status';\nimport {Type} from '../util/Type';\n\n\nexport class Server {\n\n  /**\n   *\n   * @param options -\n   * @param methods - function map\n   */\n  constructor(options, methods = {}) {\n\n    if (!options.service) {\n      throw \"missing option 'service' for service class\"\n    }\n\n    this._connectionEstablished = false;\n    this._onReady = typeof options.onReady === 'function' ? options.onReady : null;\n\n    options.type = Type.SERVER;\n    options.receiveMessageCallback = this._receiveMessage.bind(this);\n\n    this._serviceClass = options.service;\n    this._service = new this._serviceClass(options);\n    this._token = null;\n    this._methods = methods;\n  }\n\n  /**\n   * register given callback function with `methodName`\n   * @param methodName\n   * @param methodFn\n   * @returns {Consumer}\n   */\n  addMethod(methodName, methodFn) {\n    this._methods[methodName] = methodFn;\n    return this;\n  }\n\n  /**\n   * Remove callback function with given `methodName`\n   * @param methodName\n   */\n  removeMethod(methodName) {\n    if (this._methods[methodName]) {\n      delete this._methods[methodName];\n    }\n    return this;\n  }\n\n  /**\n   * Handles a message sent by a provider and invoke the method.\n   * @param jsonrpc\n   * @param id\n   * @param method\n   * @param params\n   * @param verify\n   * @param token\n   * @param test\n   * @returns {*}\n   * @private\n   */\n  _receiveMessage({jsonrpc, id, method, params, verify, token, test}) {\n\n    if (!this._connectionEstablished && verify && id) {\n      this._connectionEstablished = true;\n      this._token = id;\n      this._service.post({\n        verify,\n        id\n      });\n      if (this._onReady) {\n        this._onReady();\n      }\n    }\n\n    // check JSON RPC format for answer\n    if (!this._connectionEstablished || jsonrpc !== \"2.0\" || !id || !method || token !== this._token) {\n      return;\n    }\n\n    // message with given id does not exist\n    if (!this._methods[method]) {\n      return this._sendError(id, {\n        status: Status.METHOD_NOT_FOUND,\n        message: `method with name ${method} could not be found`\n      });\n    }\n\n    const that = this;\n    const cb = {\n      done(data) {\n        that._sendResult(id, {\n          status: Status.METHOD_SUCCESS,\n          data,\n        });\n      },\n      error(data) {\n        that._sendResult(id, {\n          status: Status.METHOD_ERROR,\n          data,\n        });\n      }\n    };\n    const methodObj = {\n      method: this._methods[method],\n      isAsync: false,\n      async: function() {\n        this.isAsync = true;\n        that._sendResult(id, {\n          status: Status.METHOD_ASYNC\n        });\n        return cb;\n      }\n    };\n\n    // invoke method\n    let result = methodObj.method(params, cb.done, cb.error);\n\n    // stop here if method works asynchronously\n    if (methodObj.isAsync) {\n      return;\n    }\n\n    // undefined result should work as success by documentation\n    if (result === undefined) {\n      result = true;\n    }\n\n    if (result === false || result === null) {\n      return cb.error();\n    }\n    return cb.done(result);\n  }\n\n  /**\n   * send `success` response to the provider\n   * @param id\n   * @param data\n   */\n  _sendResult(id, data) {\n    this._service.post({\n      jsonrpc: \"2.0\",\n      id,\n      result: data,\n    });\n  }\n\n  /**\n   * send `error` response to the provider\n   * @param id\n   * @param data\n   */\n  _sendError(id, data) {\n    this._service.post({\n      jsonrpc: \"2.0\",\n      id,\n      error: data,\n    });\n  }\n\n  destroy() {\n    this._service.destroy();\n    this._methods = {};\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/role/Server.js","\nexport * from './role/Server'\nexport * from './service/index'\nexport * from './util/index'\n\n\n// WEBPACK FOOTER //\n// ./src/server.js"],"sourceRoot":""}